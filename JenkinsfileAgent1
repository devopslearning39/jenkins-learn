pipeline {
    agent {
        node {
            label 'AGENT-1'
        }
    }

    options {
        ansiColor('xterm')
    }

    parameters {
        choice(name: 'Env', choices: ['Dev', 'Prod'], description: 'Please select which env you want to deploy to')
    }

    stages {
        stage('Dev env build deploy') {
            when {
                expression { params.Env == 'Dev' }
            }
            steps {
                script {
                    input message: "Should we continue to deploy in Dev env ?", ok: "Yes, we should."
                    echo 'You have selected Dev env. Deploying to Dev...'
                }
            }
        }

        stage('Prod env build deploy') {
            when {
                expression { params.Env == 'Prod' }
            }
            steps {
                script {
                    input message: "Should we continue to deploy in Prod env ?", ok: "Yes, we should."
                    echo 'You have selected Prod env. Deploying to Prod...'
                }
            }
        }
    }
}
